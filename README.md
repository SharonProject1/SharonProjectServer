# 무궁화 꽃 게임 서버

이 서버는 Express를 사용하여 "무궁화 꽃이 피었습니다" 게임의 멀티플레이어 상호작용을 처리합니다. 플레이어의 접속, 게임 상태 관리, 준비 상태 체크 등을 지원합니다.

## 서버 주소 및 기본 포트
- **`http://sharonproject.ddns.net:8080/`**

## API 엔드포인트

### 메인 페이지

- **`GET /`**  
  - 환영 메시지를 반환합니다.
  - **응답**: `"Welcome To 무궁화 꽃 게임"`

### 플레이어 관련 엔드포인트

- **`GET /join/:id`**  
  - 서버에 플레이어를 추가합니다.
  - **파라미터**: `id` - 플레이어의 고유 식별자
  - **응답**:
    - `200`: 성공적으로 참가
    - `403`: 이미 존재하는 ID이거나 서버가 가득 찬 경우

- **`GET /check/:id`**  
  - 플레이어가 여전히 연결되어 있는지 확인하고, 대기 시간을 초기화합니다.
  - **파라미터**: `id` - 플레이어의 고유 식별자
  - **응답**: `{ "connect": true }` (연결됨), `{ "connect": false }` (연결되지 않음)

- **`GET /ready/:id`**  
  - 플레이어의 준비 상태를 `true`로 설정합니다.
  - **파라미터**: `id` - 플레이어의 고유 식별자
  - **응답**:
    - `200`: 준비 상태가 `true`로 설정됨
    - `404`: 플레이어를 찾을 수 없음

- **`GET /notready/:id`**  
  - 플레이어의 준비 상태를 `false`로 설정합니다.
  - **파라미터**: `id` - 플레이어의 고유 식별자
  - **응답**:
    - `200`: 준비 상태가 `false`로 설정됨
    - `404`: 플레이어를 찾을 수 없음

- **`GET /falled/:id`**  
  - 탈락한 플레이어를 제거합니다.
  - **파라미터**: `id` - 플레이어의 고유 식별자

### 게임 상태 엔드포인트

- **`GET /state`**  
  - 현재 게임 상태를 반환합니다.
  - **응답**:
    - `isPlaying`: 게임이 진행 중인지 여부
    - `isVoicing`: 음성 안내가 활성화되어 있는지 여부
    - `isCounting`: 게임이 카운트다운 중인지 여부
    - `serverFPS`: 서버의 초당 프레임 수
    - `leftCountDownFrame`: 카운트다운에서 남은 프레임 수
    - `numberOfPlayers`: 현재 접속한 플레이어 수
    - `playFrame`: 게임 플레이 현재의 프레임 (플레이 타임 계산을 위함)
   
- **`GET /ard`**
  - 아두이노가 다음 어떤 행동을 해야하는지 배열을 반환합니다.
  - **응답**:
    - `do`: 다음 행동 코드 배열
   
### 아두이노 관련 엔드포인트
  - **`GET /ardIsVoicing`**
    - 아두이노에서 음성이 시작되면 서버에 알립니다.
    - **응답**:
      - `200`: 정상 처리됨
   
  - **`GET /ardIsNotVoicing`**
    - 아두이노에서 음성이 종료되면 서버에 알립니다.
    - **응답**:
      - `200`: 정상 처리됨

## About activityCodes (다음 행동 코드 배열)
- 아두이노는 서버에게 주기적으로 GET 요청을 보내 activityCodes를 반환받아 행동합니다.
  - `0`: 아무 행동 없음
  - `1`: 게임을 시작, 초기화 및 카운트다운 진행
  - `2`: 음성 재생 시작
  - `3`: 모터를 회전하여 벽을 바라봄
  - `4`: 모터를 회전하여 플레이어를 바라봄
  - `5`: 제한시간으로 인해 게임이 종료됨
  - `6`: 플레이어가 한 명 남아 게임이 종료됨
