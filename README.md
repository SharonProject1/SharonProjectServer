# πΈ **λ¬΄κ¶ν™” κ½ƒ κ²μ„ μ„λ²„** πΈ

μ΄ μ„λ²„λ” Expressλ¥Ό μ‚¬μ©ν•μ—¬ **"λ¬΄κ¶ν™” κ½ƒμ΄ ν”Όμ—μµλ‹λ‹¤"** κ²μ„μ λ©€ν‹°ν”λ μ΄μ–΄ μƒνΈμ‘μ©μ„ μ²λ¦¬ν•©λ‹λ‹¤. ν”λ μ΄μ–΄μ μ ‘μ†, κ²μ„ μƒνƒ κ΄€λ¦¬, μ¤€λΉ„ μƒνƒ μ²΄ν¬ λ“±μ„ μ§€μ›ν•©λ‹λ‹¤.

---

## π–¥οΈ **μ„λ²„ μ£Όμ† λ° κΈ°λ³Έ ν¬νΈ**
- **`http://sharonproject.ddns.net:5522/`**

---

## π **API μ—”λ“ν¬μΈνΈ**

### π”– **λ©”μΈ νμ΄μ§€**

- **`GET /`**  
  - μ„λ²„ λ² μ΄μ¤ νμ΄μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

---

### π‘¤ **ν”λ μ΄μ–΄ κ΄€λ ¨ μ—”λ“ν¬μΈνΈ**

- **`GET /join/:id`**  
  - μ„λ²„μ— ν”λ μ΄μ–΄λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ
  - **μ‘λ‹µ**:
    - β… `200`: μ„±κ³µμ μΌλ΅ μ°Έκ°€
    - π« `403`: μ΄λ―Έ μ΅΄μ¬ν•λ” IDμ΄κ±°λ‚ μ„λ²„κ°€ κ°€λ“ μ°¬ κ²½μ° λλ” κ²μ„μ΄ μ΄λ―Έ μ‹μ‘λμ—μ„ κ²½μ° λ“±

- **`GET /inputNumber/:id?number=123`**  
  - μ„λ²„μ— ν”λ μ΄μ–΄μ— λ€ν• λ“± λ²νΈλ¥Ό λ°μν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μΏΌλ¦¬**: `number` - ν”λ μ΄μ–΄μ λ“± λ²νΈ  
  - **μ‘λ‹µ**:
    - β… `200`: μ„±κ³µμ μΌλ΅ λ“±λ΅λ¨
    - π« `403`: μ΄λ―Έ μ΅΄μ¬ν•λ” λ“± λ²νΈ

- **`GET /check/:id`**  
  - ν”λ μ΄μ–΄κ°€ μ—¬μ „ν μ—°κ²°λμ–΄ μλ”μ§€ ν™•μΈν•κ³ , λ€κΈ° μ‹κ°„μ„ μ΄κΈ°ν™”ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:  
    - μ—°κ²°λ¨: `{ connect: "true", needToUpdate: "<boolean>" }`  
    - μ—°κ²°λμ§€ μ•μ: `{ connect: "false" }`

- **`GET /ready/:id`**  
  - ν”λ μ΄μ–΄μ μ¤€λΉ„ μƒνƒλ¥Ό `true`λ΅ μ„¤μ •ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:
    - β… `200`: μ¤€λΉ„ μƒνƒκ°€ `true`λ΅ μ„¤μ •λ¨
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /notReady/:id`**  
  - ν”λ μ΄μ–΄μ μ¤€λΉ„ μƒνƒλ¥Ό `false`λ΅ μ„¤μ •ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:
    - β… `200`: μ¤€λΉ„ μƒνƒκ°€ `false`λ΅ μ„¤μ •λ¨
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /isRunning`**  
  - κ²μ„μ΄ μ§„ν–‰ μ¤‘μΈμ§€ μ‘λ‹µν•©λ‹λ‹¤.
  - **μ‘λ‹µ**: `"true"` λλ” `"false"` (β… 200)
   
- **`GET /survived/:id`**
  - μΉλ¦¬ν• ν”λ μ΄μ–΄λ¥Ό μ²λ¦¬ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒμ²λ¦¬λ¨
    - π« `403`: ν”λ μ΄μ–΄μ μΉλ¦¬ μ—¬λ¶€λ¥Ό λ³€κ²½ν•  μ μ—†μ.
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /failed/:id`**
  - νƒλ½ν• ν”λ μ΄μ–΄λ¥Ό μ²λ¦¬ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒμ²λ¦¬λ¨
    - π« `403`: ν”λ μ΄μ–΄μ μ‹¤ν¨ μ—¬λ¶€λ¥Ό λ³€κ²½ν•  μ μ—†μ.
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

---

### π•ΉοΈ **κ²μ„ μƒνƒ μ—”λ“ν¬μΈνΈ**

- **`GET /state`**  
  - ν„μ¬ κ²μ„ μƒνƒλ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**: `data` - Json κ²μ„ μƒνƒ λ°°μ—΄ (β… 200)

- **`GET /playerData/:id`**  
  - ν”λ μ΄μ–΄ λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:
    - `data` - Json ν”λ μ΄μ–΄ λ°μ΄ν„° λ°°μ—΄ (β… 200)
    - π« `403`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ•κ³  λ°μ΄ν„°λ¥Ό λ°ν™ν•μ§€λ§, μ¬λ°”λ¥Έ μ”μ²­μ΄ μ•„λ‹.
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /playerData`**
  - ν”λ μ΄μ–΄μ λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**: `data` - Json ν”λ μ΄μ–΄ λ°μ΄ν„° λ°°μ—΄ (β… 200)

- **`GET /ard`**  
  - μ•„λ‘μ΄λ…Έκ°€ λ‹¤μ μ–΄λ–¤ ν–‰λ™μ„ ν•΄μ•Ό ν•λ”μ§€ λ¬Έμμ—΄μ„ λ°ν™ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - `do`: λ‹¤μ ν–‰λ™ μ½”λ“ λ¬Έμμ—΄ (String)
    - `voiceCode`: λ‹¤μ μμ„± μ¬μƒ μ½”λ“ (String)
    - `voiceSpeed`: λ‹¤μ μμ„± μ¬μƒ μ†λ„ (String)
   
- **`GET /resultData`**  
  - κ²μ„ ν”λ μ΄κ°€ λλ‚ ν›„ μ”μ²­ν•©λ‹λ‹¤. κ²μ„ κ²°κ³Ό λ°μ΄ν„°λ¥Ό λ°ν™ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - `data`: κ²°κ³Ό λ°μ΄ν„° 2μ°¨μ› λ°°μ—΄

---

### π¤– **μ•„λ‘μ΄λ…Έ κ΄€λ ¨ μ—”λ“ν¬μΈνΈ**

- **`GET /ardIsVoicing`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μμ„±μ΄ μ‹μ‘λλ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒ μ²λ¦¬λ¨

- **`GET /ardIsNotVoicing`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μμ„±μ΄ μΆ…λ£λλ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒ μ²λ¦¬λ¨

- **`GET /ardWinner?number=123`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μƒμ΅΄μκ°€ λ°μƒν•λ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μΏΌλ¦¬**: `number`

---

## π“‹ **About activityCodes (λ‹¤μ ν–‰λ™ μ½”λ“ λ¬Έμμ—΄)**

- μ•„λ‘μ΄λ…Έλ” μ„λ²„μ—κ² μ£ΌκΈ°μ μΌλ΅ `GET` μ”μ²­μ„ λ³΄λ‚΄ activityCodesλ¥Ό λ°ν™λ°›μ•„ ν–‰λ™ν•©λ‹λ‹¤.  
  - `0`: μ•„λ¬΄ ν–‰λ™ μ—†μ  
  - `1`: κ²μ„μ„ μ‹μ‘, μ΄κΈ°ν™” λ° μΉ΄μ΄νΈλ‹¤μ΄ μ§„ν–‰  
  - `2`: μμ„± μ¬μƒ μ‹μ‘  
  - `3`: λ¨ν„°λ¥Ό νμ „ν•μ—¬ λ²½μ„ λ°”λΌλ΄„  
  - `4`: λ¨ν„°λ¥Ό νμ „ν•μ—¬ ν”λ μ΄μ–΄λ¥Ό λ°”λΌλ΄„  
  - `5`: μ ν•μ‹κ°„μΌλ΅ μΈν•΄ κ²μ„μ΄ μΆ…λ£λ¨  
  - `6`: λ”μ΄μƒ ν”λ μ΄ μ¤‘μΈ (=μƒμ΅΄ν•΄ μμ§€λ§ μ°μΉν•μ§€λ” λ»ν•) ν”λ μ΄μ–΄κ°€ μ—†μ–΄μ„ κ²μ„μ΄ μΆ…λ£λ¨
- **μμ‹**: `{do: '024', voiceCode: "4", voiceSpeed: "1.5"}`

---

## π–‹οΈ **About playerData (ν”λ μ΄μ–΄ λ°μ΄ν„° json)**

- μ•±μ€ `check` μ”μ²­μ— `needToUpdate`κ°€ `true`μΌ λ•, ν”λ μ΄μ–΄ λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **λ°μ΄ν„° κµ¬μ΅°**:
    - **key**: `data`
    - **value**: `[[playerId, playerNumber, isReady, isAlive, isSurvive], [playerId, ...], ...]`
- **μμ‹**: `{"data": [["abcd", "456", "false", "true", "false"], ["abdfs", "101", "true", "true", "false"], ["weghi", "455", "false", "true", "false"]]}`
- **β—οΈμ£Όμ μ‚¬ν•­β—οΈ**: λ§μ•½ playerNumber κ°€ μ •μλμ§€ μ•μ•λ‹¤λ©΄ `"NaN"`μΌλ΅ λ°ν™λ©λ‹λ‹¤.

---

## π·οΈ **About resultData (κ²μ„ κ²°κ³Ό λ°μ΄ν„° json)**

- μ•±μ€ `state` μ”μ²­μ— κ²μ„μ΄ μΆ…λ£λμ—μ„ λ•, κ²μ„ κ²°κ³Ό λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **λ°μ΄ν„° κµ¬μ΅°**:
    - **key**: `data`
    - **value**: `[[playerState, Rank, playerNumber, playerId, playTime], [playerState, ...], ...]`
- **μμ‹**: `{"data": [["survived", "2", "456", "Faker", "25"], ...]}`
- **`playerState`**: `"survived"`, `"failed"`, `"disconnected"`

---

## π–¨οΈ **About State (κ²μ„ μƒν™© json)**

- κ²μ„ μ§„ν–‰ μƒν™©μ΄ κ¶κΈν•  λ• `/state`λ¥Ό ν†µν•΄ κ²μ„ μƒν™©μ„ λ°ν™ λ°›μµλ‹λ‹¤.
  - **λ°μ΄ν„° κµ¬μ΅°**:
    - **key**: `data`
    - **value**: `[isRunning, isVoicing, isCounting, serverFPS, leftCountDownFrame, numberOfPlayers, numberOfPlayPlayers, playFrame, timeLeft]` (κ° λ°μ΄ν„°λ” StringμΌλ΅)
  - **μ„¤λ…**:
    - `isRunning`: 0. κ²μ„ μ§„ν–‰ μ—¬λ¶€
    - `isVoicing`: 1. μμ„± μ¬μƒ μ¤‘ μ—¬λ¶€
    - `isCounting`: 2. μΉ΄μ΄νΈλ‹¤μ΄ μ¤‘ μ—¬λ¶€
    - `serverFPS`: 3. μ„λ²„ κ³ μ • ν”„λ μ„
    - `leftCountDownFrame`: 4. μΉ΄μ΄νΈλ‹¤μ΄ λ‚¨μ€ ν”„λ μ„
    - `numberOfPlayers`: 5. μ΄ ν”λ μ΄μ–΄ μ
    - `numberOfPlayPlayers`: 6. ν”λ μ΄ μ¤‘μΈ ν”λ μ΄μ–΄ μ
    - `playFrame`: 7. κ²μ„ μ‹μ‘ ν›„ ν„μ¬ ν”„λ μ„
    - `timeLeft`: 8. κ²μ„ λ§λ¬΄λ¦¬ λ‚¨μ€ μ‹κ°„ (μ΄) (μ •μ)
- **μμ‹**: `{"data": ["true", "true", "false", "60", "0", "4", "3", "498", "26"]}`
  
---

# π“ **μ„λ²„ λ‚΄μ¥ ν•¨μ**

μ—¬κΈ°λ¶€ν„°λ” μ„λ²„μ— λ‚΄μ¥λμ–΄ **μ™Έλ¶€μ—μ„ μ ‘κ·Όν•  μ μ—†λ” ν•¨μ**λ¥Ό κΈ°μ¬ν•μ€μµλ‹λ‹¤.

---

## β™οΈ **κΈ°λ³Έ μ—°μ‚° ν•¨μ**

### **`ReadyPlayers()`**  
- **μ„¤λ…**: μ¤€λΉ„λ ν”λ μ΄μ–΄μ™€ μ „μ²΄ ν”λ μ΄μ–΄ μλ¥Ό λ°ν™ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: `[readyPlayer<int>, Player<int>]`

---

### **`NumOfPlayers()`**  
- **μ„¤λ…**: μ΄ ν”λ μ΄μ–΄ μλ¥Ό λ°ν™ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: `Number`

---

### **`NumOfAlivePlayers()`**  
- **μ„¤λ…**: κ²μ„μ„ ν”λ μ΄ μ¤‘μΈ ν”λ μ΄μ–΄μ μλ¥Ό λ°ν™ν•©λ‹λ‹¤.
- **λ°ν™κ°’**: `Number`

---

### **`TrnasformData()`**  
- **μ„¤λ…**: μ•±μ μ”μ²­μ— λ§κ² ν”λ μ΄μ–΄ λ°μ΄ν„°λ¥Ό λ³€ν™ν•μ—¬ λ°ν™ν•©λ‹λ‹¤.
- **λ°ν™κ°’**: `playerArray`

---

### **`ExitPlayerIndex(num)`**  
- **μ„¤λ…**: ν”λ μ΄μ–΄μ μΈλ±μ¤λ¥Ό μ •λ¦¬ν•©λ‹λ‹¤.
- **λ§¤κ°λ³€μ**:
  - `num`: μ—°κ²° ν•΄μ λ ν”λ μ΄μ–΄μ μΈλ±μ¤
- **λ°ν™κ°’**: μ—†μ

---

### **`Randoms()`**  
- **μ„¤λ…**: λ‘ μ‹¤μ μ‚¬μ΄μ λλ¤ κ°’μ„ λ°ν™ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `min`: μµμ†κ°’  
  - `max`: μµλ€κ°’  
- **λ°ν™κ°’**: `randomNumber`

---

### **`Randomn()`**  
- **μ„¤λ…**: λ‘ μ •μ μ‚¬μ΄μ λλ¤ μ •μλ¥Ό λ°ν™ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `min`: μµμ†κ°’  
  - `max`: μµλ€κ°’  
- **λ°ν™κ°’**: `randomInteger`

---

### **`Averages()`**  
- **μ„¤λ…**: λ°°μ—΄μ ν‰κ·  κ°’μ„ λ°ν™ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `arr`: ν‰κ· μ„ κµ¬ν•  λ°°μ—΄  
- **λ°ν™κ°’**: `average`

---

### **`NextRandom()`**  
- **μ„¤λ…**: `minLoopFrame`κ³Ό `maxLoopFrame` κ°’μ„ κ°±μ‹ ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ

---

### **`NextVoiceRandom()`**  
- **μ„¤λ…**: `nextVoicePlayCode`μ„ λ¬΄μ‘μ„λ΅ κ²°μ •ν•κ³ , `nexVoicePlaySpeed`λ¥Ό κ²°μ •ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`SortRight()`**  
- **μ„¤λ…**: `players[playerId][4]`μ„ κΈ°μ¤€μΌλ΅ μ¤λ¦„μ°¨μ μ •λ ¬ν•©λ‹λ‹¤. λν• λ“±μλ„ μ²λ¦¬ν•©λ‹λ‹¤.
- **λ§¤κ°λ³€μ**:
  - `arr`: μ •λ ¬ν•  2μ°¨μ› λ°°μ—΄
- **λ°ν™κ°’**: `rightSortedArray`

---

### **`SortReverse()`**  
- **μ„¤λ…**: `players[playerId][4]`μ„ κΈ°μ¤€μΌλ΅ λ‚΄λ¦Όμ°¨μ μ •λ ¬ν•©λ‹λ‹¤. λν• λ“±μλ„ μ²λ¦¬ν•©λ‹λ‹¤.
- **λ§¤κ°λ³€μ**:
  - `arr`: μ—­μ •λ ¬ν•  2μ°¨μ› λ°°μ—΄
- **λ°ν™κ°’**: `reverseSortedArray`

---

## π® **κ²μ„ μ§„ν–‰ ν•¨μ**

### **`StartCount()`**  
- **μ„¤λ…**: κ²μ„ μ‹μ‘ μΉ΄μ΄νΈλ‹¤μ΄μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`Start()`**  
- **μ„¤λ…**: κ²μ„μ„ μ‹μ‘ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`DoVoice()`**  
- **μ„¤λ…**: μμ„± μ¬μƒμ„ μ‹μ‘ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`CheckConnect()`**  
- **μ„¤λ…**: κ° ν”λ μ΄μ–΄μ μ—°κ²° μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`ExitPlayerIndex()`**  
- **μ„¤λ…**: ν”λ μ΄μ–΄ μΈλ±μ¤λ¥Ό μ •λ¦¬ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `num`: ν‡΄μ¥ν•λ” ν”λ μ΄μ–΄μ μΈλ±μ¤  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnReady()`**  
- **μ„¤λ…**: μ¤€λΉ„ μƒνƒμ—μ„ μ‹¤ν–‰λλ” ν•¨μμ…λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnCounting()`**  
- **μ„¤λ…**: μΉ΄μ΄νΈλ‹¤μ΄ μ¤‘ μ£ΌκΈ°μ μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnGame()`**  
- **μ„¤λ…**: κ²μ„ μ§„ν–‰ μ¤‘ μ£ΌκΈ°μ μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`GameEnd()`**  
- **μ„¤λ…**: κ²μ„μ„ μΆ…λ£ν•©λ‹λ‹¤.
- **λ°ν™κ°’**: μ—†μ  

---

## π“™ **State κ΄€λ ¨ ν•¨μ**

### **`DoUpdate()`**  
- **μ„¤λ…**: ν”λ μ΄μ–΄ λ°μ΄ν„°κ°€ μ—…λ°μ΄νΈκ°€ ν•„μ”ν•λ©΄ μμ • ν•„μ” μ—¬λ¶€λ¥Ό μμ •ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ

---

### **`ResultArray()`**  
- **μ„¤λ…**: κ²°κ³Ό λ°°μ—΄μ„ λ³΄κΈ° μΆ‹κ² μ •λ¦¬ν•©λ‹λ‹¤. (μ•±μ μ”μ²­μ— λ”°λΌ)
- **λ°ν™κ°’**: `resultArray`

---
