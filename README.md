# πΈ **λ¬΄κ¶ν™” κ½ƒ κ²μ„ μ„λ²„** πΈ

μ΄ μ„λ²„λ” Expressλ¥Ό μ‚¬μ©ν•μ—¬ **"λ¬΄κ¶ν™” κ½ƒμ΄ ν”Όμ—μµλ‹λ‹¤"** κ²μ„μ λ©€ν‹°ν”λ μ΄μ–΄ μƒνΈμ‘μ©μ„ μ²λ¦¬ν•©λ‹λ‹¤. ν”λ μ΄μ–΄μ μ ‘μ†, κ²μ„ μƒνƒ κ΄€λ¦¬, μ¤€λΉ„ μƒνƒ μ²΄ν¬ λ“±μ„ μ§€μ›ν•©λ‹λ‹¤.

---

## π–¥οΈ **μ„λ²„ μ£Όμ† λ° κΈ°λ³Έ ν¬νΈ**
- **`http://sharonproject.ddns.net:5522/`**

---

## π **API μ—”λ“ν¬μΈνΈ**

### π”– **λ©”μΈ νμ΄μ§€**

- **`GET /`**  
  - μ„λ²„ λ² μ΄μ¤ νμ΄μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

---

### π‘¤ **ν”λ μ΄μ–΄ κ΄€λ ¨ μ—”λ“ν¬μΈνΈ**

- **`GET /join/:id`**  
  - μ„λ²„μ— ν”λ μ΄μ–΄λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ
  - **μ‘λ‹µ**:
    - β… `200`: μ„±κ³µμ μΌλ΅ μ°Έκ°€
    - π« `403`: μ΄λ―Έ μ΅΄μ¬ν•λ” IDμ΄κ±°λ‚ μ„λ²„κ°€ κ°€λ“ μ°¬ κ²½μ°

- **`GET /inputNumber/:id?number=123`**  
  - μ„λ²„μ— ν”λ μ΄μ–΄μ— λ€ν• λ“± λ²νΈλ¥Ό λ°μν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μΏΌλ¦¬**: `number` - ν”λ μ΄μ–΄μ λ“± λ²νΈ  
  - **μ‘λ‹µ**:
    - β… `200`: μ„±κ³µμ μΌλ΅ λ“±λ΅λ¨
    - π« `403`: μ΄λ―Έ μ΅΄μ¬ν•λ” λ“± λ²νΈ

- **`GET /check/:id`**  
  - ν”λ μ΄μ–΄κ°€ μ—¬μ „ν μ—°κ²°λμ–΄ μλ”μ§€ ν™•μΈν•κ³ , λ€κΈ° μ‹κ°„μ„ μ΄κΈ°ν™”ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:  
    - μ—°κ²°λ¨: `{ "connect": true, needToUpdate: <boolean> }`  
    - μ—°κ²°λμ§€ μ•μ: `{ "connect": false }`

- **`GET /ready/:id`**  
  - ν”λ μ΄μ–΄μ μ¤€λΉ„ μƒνƒλ¥Ό `true`λ΅ μ„¤μ •ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:
    - β… `200`: μ¤€λΉ„ μƒνƒκ°€ `true`λ΅ μ„¤μ •λ¨
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /notready/:id`**  
  - ν”λ μ΄μ–΄μ μ¤€λΉ„ μƒνƒλ¥Ό `false`λ΅ μ„¤μ •ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**:
    - β… `200`: μ¤€λΉ„ μƒνƒκ°€ `false`λ΅ μ„¤μ •λ¨
    - π« `404`: ν”λ μ΄μ–΄λ¥Ό μ°Ύμ„ μ μ—†μ

- **`GET /falled/:id`** (μ¶”ν›„ μμ •)
  - νƒλ½ν• ν”λ μ΄μ–΄λ¥Ό μ κ±°ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ

---

### π•ΉοΈ **κ²μ„ μƒνƒ μ—”λ“ν¬μΈνΈ**

- **`GET /state`**  
  - ν„μ¬ κ²μ„ μƒνƒλ¥Ό λ°ν™ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**:  
    - `isPlaying`: κ²μ„μ΄ μ§„ν–‰ μ¤‘μΈμ§€ μ—¬λ¶€  
    - `isVoicing`: μμ„± μ•λ‚΄κ°€ ν™μ„±ν™”λμ–΄ μλ”μ§€ μ—¬λ¶€  
    - `isCounting`: κ²μ„μ΄ μΉ΄μ΄νΈλ‹¤μ΄ μ¤‘μΈμ§€ μ—¬λ¶€  
    - `serverFPS`: μ„λ²„μ μ΄λ‹Ή ν”„λ μ„ μ  
    - `leftCountDownFrame`: μΉ΄μ΄νΈλ‹¤μ΄μ—μ„ λ‚¨μ€ ν”„λ μ„ μ  
    - `numberOfPlayers`: ν„μ¬ μ ‘μ†ν• ν”λ μ΄μ–΄ μ  
    - `playFrame`: κ²μ„ ν”λ μ΄ ν„μ¬μ ν”„λ μ„  
    - `timeLeft`: κ²μ„ ν”λ μ΄ λ‚¨μ€ μ‹κ°„ (μ΄)  

- **`GET /playerData/:id`**  
  - ν”λ μ΄μ–΄ λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **νλΌλ―Έν„°**: `id` - ν”λ μ΄μ–΄μ κ³ μ  μ‹λ³„μ  
  - **μ‘λ‹µ**: `players` - Json νμΌ

- **`GET /ard`**  
  - μ•„λ‘μ΄λ…Έκ°€ λ‹¤μ μ–΄λ–¤ ν–‰λ™μ„ ν•΄μ•Ό ν•λ”μ§€ λ¬Έμμ—΄μ„ λ°ν™ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - `do`: λ‹¤μ ν–‰λ™ μ½”λ“ λ¬Έμμ—΄
    - `voiceFrame`: λ‹¤μ μμ„± μ¬μƒ **ν”„λ μ„**

---

### π¤– **μ•„λ‘μ΄λ…Έ κ΄€λ ¨ μ—”λ“ν¬μΈνΈ**

- **`GET /ardIsVoicing`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μμ„±μ΄ μ‹μ‘λλ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒ μ²λ¦¬λ¨

- **`GET /ardIsNotVoicing`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μμ„±μ΄ μΆ…λ£λλ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μ‘λ‹µ**:
    - β… `200`: μ •μƒ μ²λ¦¬λ¨

- **`GET /ardSurvive?number=123`**  
  - μ•„λ‘μ΄λ…Έμ—μ„ μƒμ΅΄μκ°€ λ°μƒν•λ©΄ μ„λ²„μ— μ•λ¦½λ‹λ‹¤.
  - **μΏΌλ¦¬**: `number`

---

## π“‹ **About activityCodes (λ‹¤μ ν–‰λ™ μ½”λ“ λ¬Έμμ—΄)**

- μ•„λ‘μ΄λ…Έλ” μ„λ²„μ—κ² μ£ΌκΈ°μ μΌλ΅ `GET` μ”μ²­μ„ λ³΄λ‚΄ activityCodesλ¥Ό λ°ν™λ°›μ•„ ν–‰λ™ν•©λ‹λ‹¤.  
  - `0`: μ•„λ¬΄ ν–‰λ™ μ—†μ  
  - `1`: κ²μ„μ„ μ‹μ‘, μ΄κΈ°ν™” λ° μΉ΄μ΄νΈλ‹¤μ΄ μ§„ν–‰  
  - `2`: μμ„± μ¬μƒ μ‹μ‘  
  - `3`: λ¨ν„°λ¥Ό νμ „ν•μ—¬ λ²½μ„ λ°”λΌλ΄„  
  - `4`: λ¨ν„°λ¥Ό νμ „ν•μ—¬ ν”λ μ΄μ–΄λ¥Ό λ°”λΌλ΄„  
  - `5`: μ ν•μ‹κ°„μΌλ΅ μΈν•΄ κ²μ„μ΄ μΆ…λ£λ¨  
  - `6`: ν”λ μ΄μ–΄κ°€ ν• λ… λ‚¨μ•„ κ²μ„μ΄ μΆ…λ£λ¨
- **μμ‹**: `{do: '024', voiceFrame: 71}`

---

## π–‹οΈ **About playerData (ν”λ μ΄μ–΄ λ°μ΄ν„° json)**

- μ•±μ€ `check` μ”μ²­μ— `needToUpdate`κ°€ `true`μΌ λ•, ν”λ μ΄μ–΄ λ°μ΄ν„°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
  - **λ°μ΄ν„° κµ¬μ΅°**:
    - **key**: `playerId`
    - **value**: `[connectCheckFrame, isReady, playerNumber, isSurvive, needToUpdate, playerIndex]`
- **μμ‹**: `{'abcd': [198, false, 456, true, true, 0], 'hasdf': [197, false, 101, true, true, 1], 'wkjnc': [198, false, 455, true, false, 2]}`

---

## π–¨οΈ **About State (κ²μ„ μƒν™© json)**

- κ²μ„ μ§„ν–‰ μƒν™©μ΄ κ¶κΈν•  λ• `/state`λ¥Ό ν†µν•΄ κ²μ„ μƒν™©μ„ λ°ν™ λ°›μµλ‹λ‹¤.
  - **λ°μ΄ν„° κµ¬μ΅°**:
    - **key**:
      - `isPlaying`: κ²μ„ μ§„ν–‰ μ—¬λ¶€
      - `isVoicing`: μμ„± μ¬μƒ μ¤‘ μ—¬λ¶€
      - `isCounting`: μΉ΄μ΄νΈλ‹¤μ΄ μ¤‘ μ—¬λ¶€
      - `serverFPS`: μ„λ²„ ν”„λ μ„
      - `leftCountDownFrame`: μΉ΄μ΄νΈλ‹¤μ΄ λ‚¨μ€ ν”„λ μ„
      - `numberOfPlayers`: μ΄ ν”λ μ΄μ–΄ μ
      - `playFrame`: κ²μ„ μ‹μ‘ ν›„ ν„μ¬ ν”„λ μ„
      - `timeLeft`: κ²μ„ λ§λ¬΄λ¦¬ λ‚¨μ€ μ‹κ°„ (μ΄)
- **μμ‹**: `{"isPlaying":true, "isVoicing":false, "isCounting":false, "serverFPS":60, "leftCountDownFrame":0, "numberOfPlayers":4, "playFrame":12, "timeLeft":50.8}`
---

# π“ **μ„λ²„ λ‚΄μ¥ ν•¨μ**

μ—¬κΈ°λ¶€ν„°λ” μ„λ²„μ— λ‚΄μ¥λμ–΄ **μ™Έλ¶€μ—μ„ μ ‘κ·Όν•  μ μ—†λ” ν•¨μ**λ¥Ό κΈ°μ¬ν•μ€μµλ‹λ‹¤.

---

## β™οΈ **κΈ°λ³Έ μ—°μ‚° ν•¨μ**

### **`ReadyPlayers()`**  
- **μ„¤λ…**: μ¤€λΉ„λ ν”λ μ΄μ–΄μ™€ μ „μ²΄ ν”λ μ΄μ–΄ μλ¥Ό λ°ν™ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: `[readyPlayer<int>, Player<int>]`

---

### **`NumOfPlayers()`**  
- **μ„¤λ…**: μ΄ ν”λ μ΄μ–΄ μλ¥Ό λ°ν™ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: `Number`

---

### **`Randoms()`**  
- **μ„¤λ…**: λ‘ μ‹¤μ μ‚¬μ΄μ λλ¤ κ°’μ„ λ°ν™ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `min`: μµμ†κ°’  
  - `max`: μµλ€κ°’  
- **λ°ν™κ°’**: `randomNumber`

---

### **`Averages()`**  
- **μ„¤λ…**: λ°°μ—΄μ ν‰κ·  κ°’μ„ λ°ν™ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `arr`: ν‰κ· μ„ κµ¬ν•  λ°°μ—΄  
- **λ°ν™κ°’**: `average`

---

### **`NextRandom()`**  
- **μ„¤λ…**: `minLoopFrame`κ³Ό `maxLoopFrame` κ°’μ„ κ°±μ‹ ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ

### **`NextVoiceRandom()`**  
- **μ„¤λ…**: `nextVoicePlayFrame`μ„ λ¬΄μ‘μ„λ΅ κ²°μ •ν•κ³ , `minVoiceFrame`κ³Ό `maxVoiceFrame` κ°’μ„ κ°±μ‹ ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

## π® **κ²μ„ μ§„ν–‰ ν•¨μ**

### **`StartCount()`**  
- **μ„¤λ…**: κ²μ„ μ‹μ‘ μΉ΄μ΄νΈλ‹¤μ΄μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`Start()`**  
- **μ„¤λ…**: κ²μ„μ„ μ‹μ‘ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`DoVoice()`**  
- **μ„¤λ…**: μμ„± μ¬μƒμ„ μ‹μ‘ν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`CheckConnect()`**  
- **μ„¤λ…**: κ° ν”λ μ΄μ–΄μ μ—°κ²° μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`ExitPlayerIndex()`**  
- **μ„¤λ…**: ν”λ μ΄μ–΄ μΈλ±μ¤λ¥Ό μ •λ¦¬ν•©λ‹λ‹¤.  
- **λ§¤κ°λ³€μ**:  
  - `num`: ν‡΄μ¥ν•λ” ν”λ μ΄μ–΄μ μΈλ±μ¤  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnReady()`**  
- **μ„¤λ…**: μ¤€λΉ„ μƒνƒμ—μ„ μ‹¤ν–‰λλ” ν•¨μμ…λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnCounting()`**  
- **μ„¤λ…**: μΉ΄μ΄νΈλ‹¤μ΄ μ¤‘ μ£ΌκΈ°μ μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  

---

### **`PlayOnGame()`**  
- **μ„¤λ…**: κ²μ„ μ§„ν–‰ μ¤‘ μ£ΌκΈ°μ μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤.  
- **λ°ν™κ°’**: μ—†μ  
